---
layout:     post
title:      iOS中常用的锁
subtitle:   iOS中常用的锁
date:       2020-07-17
author:     KG丿夏沫
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - iOS
    - 锁
    - 面试题
    - NSLock
    - NSConditionLock
    - NSRecursiveLock
    - NSCondition
    - @synchronized
    - dispatch_semaphore
---

# iOS中常用的锁

## 一、什么是锁，为什么要用锁？

> 锁：(家里大门上用来控制大门的，不是自己家人不让进，嗯是这样的）在iOS开发中，我们经常提起加锁、解锁，锁到底是什么，别急，iOS中我们说到锁就必须提一下买票系统了，如果说库里有100张票，现在有10个窗口在售票，如果同一时间，10个窗口去查看库里还有多少票，都是返回的100，也就是说每个窗口都可以买100张，那么库里只有一张的时候，10个窗口去查询显示一张，但是10个窗口没有规定谁卖这张票，所以都可以去卖，那么问题来了，10个窗口都有人要买票，同时开始查询购票，理想状态下，购票结果同时返回，那么10个人都显示购票成功了，但是票只有一张，问题来了，怎么解决？我们的重点加锁，对就是加锁，加锁的效果就是，走独木桥，而且是必须一次一个人走，后面的排队，等前面的人过完了，后面的再过。我们程序也是，如果多个地方同时访问同一片内容，并且做出修改了，那么同时去读取这块内存的函数，得到的值就不确定了，不是我们想要的，所以我们在某些代码块加锁，当有对象访问的时候，就加锁，等他访问完了，然后解锁，别人再去访问，枷锁后，其他对象再来访问，那就只能等待了。

>为什么要用锁：为了数据安全，就是这么简单。

## 二、在iOS开发中都有哪些锁？

> iOS开发中有八大锁，但是我们常用的就四五种，所以今天主要对象还是常用的锁，其他的介绍下大概就行，如果想详细了解，推荐<a href="https://www.jianshu.com/p/b3ab3d390903">Cooci老师的精讲</a>

> 我们常用的锁有以下几种：

>1、NSLock:这个锁在RunLoop

>2、@synchronized

>3、NSRecursiveLock

>4、dispatch_semaphore